- name: List files in repository
  run: |
    ls -la
- name: Replace Secrets in JS
  run: |
    # Проверяем, существует ли файл script.js
    if [ ! -f script.js ]; then
      echo "Error: script.js not found!"
      exit 1
    fi
    # Заменяем заполнители на реальные секреты
    sed -i "s|{{ GITHUB_SECRET_CLIENT_ID }}|$CLIENT_ID_VALUE|g" script.js
    sed -i "s|{{ GITHUB_SECRET_SPREADSHEET_ID }}|$SPREADSHEET_ID_VALUE|g" script.js
    sed -i "s|{{ GITHUB_SECRET_API_KEY }}|$API_KEY_VALUE|g" script.js
    echo "Secrets replaced in script.js"
  env:
    CLIENT_ID_VALUE: ${{ secrets.CLIENT_ID }}
    SPREADSHEET_ID_VALUE: ${{ secrets.SPREADSHEET_ID }}
    API_KEY_VALUE: ${{ secrets.API_KEY }}
